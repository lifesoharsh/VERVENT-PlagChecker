(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{"4sDh":function(e,t,n){var r=n("4uTw"),a=n("03A+"),o=n("Z0cm"),i=n("wJg7"),c=n("shjB"),u=n("9Nap");e.exports=function(e,t,n){for(var s=-1,l=(t=r(t,e)).length,p=!1;++s<l;){var d=u(t[s]);if(!(p=null!=e&&n(e,d)))break;e=e[d]}return p||++s!=l?p:!!(l=null==e?0:e.length)&&c(l)&&i(d,l)&&(o(e)||a(e))}},BiGR:function(e,t,n){var r=n("nmnc"),a=n("03A+"),o=n("Z0cm"),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||a(e)||!!(i&&e&&e[i])}},CH3K:function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},FZoo:function(e,t,n){var r=n("MrPd"),a=n("4uTw"),o=n("wJg7"),i=n("GoyQ"),c=n("9Nap");e.exports=function(e,t,n,u){if(!i(e))return e;for(var s=-1,l=(t=a(t,e)).length,p=l-1,d=e;null!=d&&++s<l;){var f=c(t[s]),h=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(s!=p){var g=d[f];void 0===(h=u?u(g,f,d):void 0)&&(h=i(g)?g:o(t[s+1])?[]:{})}r(d,f,h),d=d[f]}return e}},FfPP:function(e,t,n){var r=n("idmN"),a=n("hgQt");e.exports=function(e,t){return r(e,t,(function(t,n){return a(e,n)}))}},JZM8:function(e,t,n){var r=n("FfPP"),a=n("xs/l")((function(e,t){return null==e?{}:r(e,t)}));e.exports=a},Juji:function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},MrPd:function(e,t,n){var r=n("hypo"),a=n("ljhN"),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];o.call(e,t)&&a(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},OFL0:function(e,t,n){var r=n("lvO4"),a=n("4sDh");e.exports=function(e,t){return null!=e&&a(e,t,r)}},Q3MV:function(e,t,n){"use strict";var r=n("o0o1"),a=n.n(r),o=n("rePB"),i=n("HaE+"),c=n("q1tI"),u=n.n(c),s=n("vOnD"),l=n("sZxp"),p=n.n(l),d=n("20a2"),f=n("W+th"),h=n("c1LL"),g=n("o7Dm"),b=n("QEJN"),m=n("kChW"),x=n("Xsu3"),v=n("/ju/"),y=n("g+62"),w=n("JZM8"),O=n.n(w),j=n("OFL0"),k=n.n(j),P=n("FyU6"),S=n("bX0F"),G=n("Cc08"),N=n("Zn9y"),D=n("+BKU"),_=n("slGX"),B=n("u8jK"),C=n("PA5v"),F=n("GPDK"),L=n("Q25a"),A=n("PTE6"),I=u.a.createElement;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=Object(f.a)(P.a),M=Object(h.a)(C.a),T=Object(g.a)((function(e){var t=e.nbHits;return I("span",null,Intl.NumberFormat().format(t)," stories found")})),R=Object(s.default)(B.b).withConfig({displayName:"AlgoliaStoryResults__Layout",componentId:"tvw0o5-0"})(["header{@media screen and (min-width:768px){text-align:center;margin-bottom:25px;}h1{margin-bottom:0;margin-top:0;display:grid;grid-template-columns:1fr auto 1fr;grid-column-gap:5px;justify-items:center;align-items:center;> span{grid-column-start:2;}small{font-size:0.5em;}button{margin-left:auto;}}p{color:",";}}header{display:flex;&.tagged-header{flex-flow:column;}button.subscribe{width:fit-content;align-self:center;}&.search-header{flex-wrap:wrap;justify-content:space-between;align-items:center;margin-bottom:1rem;> div{display:flex;flex-wrap:wrap;align-items:center;h1{margin-right:1rem;}@media screen and (min-width:768px){flex-wrap:nowrap;}}}}.ais-RefinementList,.ais-SearchBox{display:",";width:100%;}.ais-SearchBox-form{display:flex;align-items:center;position:relative;input{background:",";border:none;margin:1rem 0;border-radius:5px;font-weight:bold;outline-color:",";width:100%;background:",";transition:all 120ms ease-in-out;color:",";&::placeholder{color:",";}}> button{display:flex;padding:15px;border:0;cursor:pointer;background:none;&.ais-SearchBox-submit{background-color:",";}.ais-SearchBox-submitIcon,.ais-SearchBox-resetIcon{width:15px;height:15px;path{fill:",";}}&.ais-SearchBox-reset{background:none;}}.ais-SearchBox-submit{position:absolute;right:40px;top:13px;}@media screen and (min-width:768px){input{font-size:3rem;padding:1rem 1.5rem;}> button{padding:16px;}.ais-SearchBox-submit{right:50px;}}}.ais-Pagination-list{display:flex;align-items:center;justify-content:flex-end;flex-wrap:wrap;margin:20px 0;list-style:none;font-size:1.8rem;.ais-Pagination-link{padding:0.3rem 1rem;display:block;border:1px solid ",";border-radius:2px;text-decoration:none;color:",";-webkit-transition:background-color 0.2s ease-out;transition:background-color 0.2s ease-out;&:hover{background-color:",";color:",";}}.ais-Pagination-item{margin-bottom:10px;}.ais-Pagination-item + .ais-Pagination-item{margin-left:10px;}.ais-Pagination-item--selected .ais-Pagination-link{color:",";background-color:",";border-color:",";}}@media screen and (min-width:768px){grid-gap:2.5rem 25px;}"],(function(e){var t=e.theme;return e.darkMode?t.veryLightGrey:t.veryDarkGrey}),(function(e){return e.searchPage?"block":"none"}),(function(e){return e.theme.veryDarkGreen}),(function(e){return e.theme.darkGreen}),(function(e){return e.theme.veryDarkGreen}),(function(e){return e.theme.green}),(function(e){return e.theme.darkGreen}),(function(e){return e.theme.veryDarkGreen}),(function(e){return e.theme.darkGreen}),(function(e){return e.theme.lightGrey}),(function(e){var t=e.theme;return e.darkMode?t.veryLightGrey:t.veryDarkGrey}),(function(e){return e.theme.darkGreen}),(function(e){return e.theme.veryLightGrey}),(function(e){return e.theme.veryLightGrey}),(function(e){return e.theme.darkGreen}),(function(e){return e.theme.darkGreen}));t.a=function(e){var t=e.data,n=void 0===t?{}:t,r=e.loading,u=e.onSearchStateChange,s=e.searchState,l=e.searchClient,f=e.createURL,h=e.searchPage,g=Object(y.a)(!1).value,w=Object(d.useRouter)(),j=Object(L.c)()||{},P=j.user,C=j.loadingUser,E=j.authenticated,Q=Object(c.useState)(!1),U=Q[0],z=Q[1];Object(c.useEffect)((function(){C||K()}),[C]);var K=function(){var e=Object(i.a)(a.a.mark((function e(){var t,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==P&&void 0!==P&&P.uid){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(A.a)();case 4:return t=e.sent,e.next=7,t.firestore().collection("subscriptions").doc(P.uid).get();case 7:if(r=e.sent,o=r.data(),r.exists&&o){e.next=13;break}return o=J(J({},O()(P,["uid","email","handle","displayName"])),{},{id:P.uid,tags:{}}),e.next=13,r.ref.set(o);case 13:k()(o.tags,n.slug)&&z(!0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(i.a)(a.a.mark((function e(){var t,r,i,c,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=2;break}return e.abrupt("return",w.push("/signup"));case 2:return e.next=4,Object(A.a)();case 4:return i=e.sent,c=n.objectID,e.next=8,i.firestore().collection("subscriptions").doc(P.uid).get();case 8:if(null===(u=e.sent)||void 0===u||null===(t=u.data())||void 0===t||null===(r=t.tags)||void 0===r||!r[c]){e.next=16;break}return e.next=12,u.ref.update(Object(o.a)({},"tags.".concat(c),i.firestore.FieldValue.delete()));case 12:z(!1),Object(_.b)({category:"Subscription",action:"Unsubscribed",label:"".concat(n.slug," - ").concat(P.handle),nonInteraction:!1}),e.next=21;break;case 16:return s={frequency:"DAILY",slug:n.slug,text:n.text,lastSentAt:null},e.next=19,u.ref.update(Object(o.a)({},"tags.".concat(c),s));case 19:z(!0),Object(_.b)({category:"Subscription",action:"Subscribed",label:"".concat(n.slug," - ").concat(P.handle),nonInteraction:!1});case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r?I(R,null,I("h1",null,I(p.a,{count:2})),I(G.a,null,I(S.a,null),I(S.a,null),I(S.a,null),I(S.a,null),I(S.a,null),I(S.a,null))):I(R,{darkMode:g,searchPage:h},I(b.a,{searchClient:l,indexName:"stories",searchState:s,onSearchStateChange:u,createURL:f},h?I("header",{className:"search-header"},I("div",null,I(m.a,{autoFocus:!0,searchAsYouType:!1,translations:{placeholder:"Search..."}})),I(T,null)):I("header",{className:"tagged-header"},I("h1",null,I("span",null,"#",n.slug," stories"," ",n.storyCount&&I("small",null,"(",Intl.NumberFormat().format(n.storyCount)," results)"))," "),n.description&&I("p",null,Object(D.a)(n.description)),I(N.b,{className:"subscribe",onClick:X},U?I("span",null,"Subscribed ",I("i",{className:"fal fa-check"})):I("span",null,"Subscribe ",I("i",{className:"fal fa-newspaper"}))),I(m.a,{autoFocus:!0,searchAsYouType:!1})),I(M,{operator:"and",isSearchPage:h,attribute:"tags"}),I(x.a,{hitsPerPage:n.tagAd?11:12}),I(Z,{tagAd:n.tagAd}),I(v.a,null)),I(B.a,null,I(F.a,null)))}},TYy9:function(e,t,n){var r=n("XGnz");e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},XGnz:function(e,t,n){var r=n("CH3K"),a=n("BiGR");e.exports=function e(t,n,o,i,c){var u=-1,s=t.length;for(o||(o=a),c||(c=[]);++u<s;){var l=t[u];n>0&&o(l)?n>1?e(l,n-1,o,i,c):r(c,l):i||(c[c.length]=l)}return c}},hgQt:function(e,t,n){var r=n("Juji"),a=n("4sDh");e.exports=function(e,t){return null!=e&&a(e,t,r)}},hypo:function(e,t,n){var r=n("O0oS");e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},idmN:function(e,t,n){var r=n("ZWtO"),a=n("FZoo"),o=n("4uTw");e.exports=function(e,t,n){for(var i=-1,c=t.length,u={};++i<c;){var s=t[i],l=r(e,s);n(l,s)&&a(u,o(s,e),l)}return u}},lvO4:function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&n.call(e,t)}},"xs/l":function(e,t,n){var r=n("TYy9"),a=n("Ioao"),o=n("wclG");e.exports=function(e){return o(a(e,void 0,r),e+"")}}}]);
//# sourceMappingURL=a17f8e10a48781d6e60615988466fbabae671939.378f6b92c754375cb364.js.map